{"id":"node_modules/camera-project/index.js","dependencies":[{"name":"/Users/felix/Documents/hecodeit/webgl/04_3d-camera-in-canvas2d/package.json","includedInParent":true,"mtime":1584357205901},{"name":"/Users/felix/Documents/hecodeit/webgl/04_3d-camera-in-canvas2d/node_modules/camera-project/package.json","includedInParent":true,"mtime":1584357011490},{"name":"gl-vec4/transformMat4","loc":{"line":1,"column":28},"parent":"/Users/felix/Documents/hecodeit/webgl/04_3d-camera-in-canvas2d/node_modules/camera-project/index.js","resolved":"/Users/felix/Documents/hecodeit/webgl/04_3d-camera-in-canvas2d/node_modules/gl-vec4/transformMat4.js"},{"name":"gl-vec4/set","loc":{"line":2,"column":18},"parent":"/Users/felix/Documents/hecodeit/webgl/04_3d-camera-in-canvas2d/node_modules/camera-project/index.js","resolved":"/Users/felix/Documents/hecodeit/webgl/04_3d-camera-in-canvas2d/node_modules/gl-vec4/set.js"}],"generated":{"js":"var transformMat4 = require('gl-vec4/transformMat4')\nvar set = require('gl-vec4/set')\n\nvar NEAR_RANGE = 0\nvar FAR_RANGE = 1\nvar tmp4 = [0, 0, 0, 0]\n\nmodule.exports = cameraProject\nfunction cameraProject (out, vec, viewport, combinedProjView) {\n  var vX = viewport[0],\n    vY = viewport[1],\n    vWidth = viewport[2],\n    vHeight = viewport[3],\n    n = NEAR_RANGE,\n    f = FAR_RANGE\n\n  // convert: clip space -> NDC -> window coords\n  // implicit 1.0 for w component\n  set(tmp4, vec[0], vec[1], vec[2], 1.0)\n\n  // transform into clip space\n  transformMat4(tmp4, tmp4, combinedProjView)\n\n  // now transform into NDC\n  var w = tmp4[3]\n  if (w !== 0) { // how to handle infinity here?\n    tmp4[0] = tmp4[0] / w\n    tmp4[1] = tmp4[1] / w\n    tmp4[2] = tmp4[2] / w\n  }\n\n  // and finally into window coordinates\n  // the foruth component is (1/clip.w)\n  // which is the same as gl_FragCoord.w\n  out[0] = vX + vWidth / 2 * tmp4[0] + (0 + vWidth / 2)\n  out[1] = vY + vHeight / 2 * tmp4[1] + (0 + vHeight / 2)\n  out[2] = (f - n) / 2 * tmp4[2] + (f + n) / 2\n  out[3] = w === 0 ? 0 : 1 / w\n  return out\n}\n"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/camera-project/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":2,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":3,"column":0},"generated":{"line":3,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":4,"column":0},"generated":{"line":4,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":5,"column":0},"generated":{"line":5,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":6,"column":0},"generated":{"line":6,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":7,"column":0},"generated":{"line":7,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":8,"column":0},"generated":{"line":8,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":9,"column":0},"generated":{"line":9,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":10,"column":0},"generated":{"line":10,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":11,"column":0},"generated":{"line":11,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":12,"column":0},"generated":{"line":12,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":13,"column":0},"generated":{"line":13,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":14,"column":0},"generated":{"line":14,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":15,"column":0},"generated":{"line":15,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":16,"column":0},"generated":{"line":16,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":17,"column":0},"generated":{"line":17,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":18,"column":0},"generated":{"line":18,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":19,"column":0},"generated":{"line":19,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":20,"column":0},"generated":{"line":20,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":21,"column":0},"generated":{"line":21,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":22,"column":0},"generated":{"line":22,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":23,"column":0},"generated":{"line":23,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":24,"column":0},"generated":{"line":24,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":25,"column":0},"generated":{"line":25,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":26,"column":0},"generated":{"line":26,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":27,"column":0},"generated":{"line":27,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":28,"column":0},"generated":{"line":28,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":29,"column":0},"generated":{"line":29,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":30,"column":0},"generated":{"line":30,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":31,"column":0},"generated":{"line":31,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":32,"column":0},"generated":{"line":32,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":33,"column":0},"generated":{"line":33,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":34,"column":0},"generated":{"line":34,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":35,"column":0},"generated":{"line":35,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":36,"column":0},"generated":{"line":36,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":37,"column":0},"generated":{"line":37,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":38,"column":0},"generated":{"line":38,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":39,"column":0},"generated":{"line":39,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":40,"column":0},"generated":{"line":40,"column":0}},{"source":"node_modules/camera-project/index.js","original":{"line":41,"column":0},"generated":{"line":41,"column":0}}],"sources":{"node_modules/camera-project/index.js":"var transformMat4 = require('gl-vec4/transformMat4')\nvar set = require('gl-vec4/set')\n\nvar NEAR_RANGE = 0\nvar FAR_RANGE = 1\nvar tmp4 = [0, 0, 0, 0]\n\nmodule.exports = cameraProject\nfunction cameraProject (out, vec, viewport, combinedProjView) {\n  var vX = viewport[0],\n    vY = viewport[1],\n    vWidth = viewport[2],\n    vHeight = viewport[3],\n    n = NEAR_RANGE,\n    f = FAR_RANGE\n\n  // convert: clip space -> NDC -> window coords\n  // implicit 1.0 for w component\n  set(tmp4, vec[0], vec[1], vec[2], 1.0)\n\n  // transform into clip space\n  transformMat4(tmp4, tmp4, combinedProjView)\n\n  // now transform into NDC\n  var w = tmp4[3]\n  if (w !== 0) { // how to handle infinity here?\n    tmp4[0] = tmp4[0] / w\n    tmp4[1] = tmp4[1] / w\n    tmp4[2] = tmp4[2] / w\n  }\n\n  // and finally into window coordinates\n  // the foruth component is (1/clip.w)\n  // which is the same as gl_FragCoord.w\n  out[0] = vX + vWidth / 2 * tmp4[0] + (0 + vWidth / 2)\n  out[1] = vY + vHeight / 2 * tmp4[1] + (0 + vHeight / 2)\n  out[2] = (f - n) / 2 * tmp4[2] + (f + n) / 2\n  out[3] = w === 0 ? 0 : 1 / w\n  return out\n}\n"},"lineCount":41}},"error":null,"hash":"4ae3cbd8339c5bc082e9f431765224bc","cacheData":{"env":{}}}